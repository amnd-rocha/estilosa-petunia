var screen=document.getElementById("screen");screenLeft=screen.getBoundingClientRect().left,screenRight=screen.getBoundingClientRect().right,screenCenter=screenRight-(screenWidth=screen.getBoundingClientRect().width)/2;var itemsWearing=document.querySelectorAll(".outfit"),doll=itemsWearing[0],dollWidth=doll.width,dollX=0,vel=25,home=document.getElementById("home"),level1=document.getElementById("level1"),level1Intro=document.getElementById("level1Intro"),ending=document.getElementById("ending"),page=1,loop=[],LEFT=!1,RIGHT=!1,itemsTotal=[];for(let i=0;i<5;i++)itemsTotal.push("acc"+i),itemsTotal.push("shoes"+i),itemsTotal.push("bottom"+i),itemsTotal.push("top"+i);var outfit=["acc0","shoes0","bottom0","top0"],outfitNum=1,idealOutfit=[];function generateOutfit(){(idealOutfit=[]).push("acc"+outfitNum),idealOutfit.push("shoes"+outfitNum),idealOutfit.push("bottom"+outfitNum),idealOutfit.push("top"+outfitNum)}var slots=document.querySelectorAll(".slot"),objArray=[],objInitialY=20,levelArray=[];function generateLevelArray(){levelArray=itemsTotal;for(let e=0;e<3;e++)for(let t=0;t<idealOutfit.length;t++)levelArray.push(idealOutfit[t])}function generateObject(){let e=levelArray[Math.floor(Math.random()*levelArray.length)],t=[e,(Math.floor(5*Math.random())+2)*5,objInitialY];for(let l=0;l<objArray.length;l++)objArray[l][0]==e&&(t=generateObject());return t}function generateObjArray(){objArray=[];for(let e=0;e<slots.length;e++)objArray.push(generateObject())}function moveObjects(){for(let e=0;e<objArray.length;e++)objArray[e][2]>500&&(objArray[e]=generateObject()),objArray[e][2]+=objArray[e][1]}function wear(e){switch(!0){case e.includes("acc"):outfit[0]=e;break;case e.includes("shoes"):outfit[1]=e;break;case e.includes("bottom"):outfit[2]=e;break;case e.includes("top"):outfit[3]=e}}function match(){for(let e=0;e<itemsWearing.length;e++)if(outfit[e]!=idealOutfit[e])return!1;return!0}function moveDoll(){for(let e=0;e<itemsWearing.length;e++)itemsWearing[e].style.left=dollX+"px"}function gameLoop(){match()&&(page=4,refresh()),moveObjects(),LEFT&&doll.getBoundingClientRect().left>level1.getBoundingClientRect().left+5&&(dollX-=vel,moveDoll()),RIGHT&&doll.getBoundingClientRect().right<level1.getBoundingClientRect().right-10&&(dollX+=vel,moveDoll());for(let e=0;e<outfit.length;e++)itemsWearing[e+1].src="img/"+outfit[e]+".png";for(let t=0;t<slots.length;t++){let l=slots[t];l.src="img/z"+objArray[t][0]+".png",l.style.top=objArray[t][2]+"px";let o=l.offsetTop+l.height,n=l.offsetLeft+l.width/2,a=doll.offsetLeft+dollWidth/2;o>370&&o<450&&n<a+30&&n>a-30&&(wear(objArray[t][0]),objArray[t]=generateObject())}}var finalMsg=document.getElementById("finalMsg"),nextButton=document.getElementById("next"),levelDescription=document.getElementById("levelDescription"),levelNum=document.getElementById("levelNum"),loading=document.getElementById("loading"),loadingText=document.getElementById("loadingText"),preview=document.querySelectorAll(".imgL1"),bye=document.getElementById("bye"),look=document.getElementById("look");function refresh(){switch(!0){case 1==page:{loading.style.display="flex";let e=[],t=-1;for(;t<itemsTotal.length;){t++;let l=new Image;l.src="img/"+itemsTotal[1]+"png",e.push(l)}e.length>=itemsTotal.length&&(loading.style.display="none",home.style.display="flex",level1Intro.style.display="none",level1.style.display="none",ending.style.display="none");break}case 2==page:preview[0].src="img/zacc"+outfitNum+".png",preview[1].src="img/zbottom"+outfitNum+".png",preview[2].src="img/ztop"+outfitNum+".png",preview[3].src="img/zshoes"+outfitNum+".png",home.style.display="none",level1Intro.style.display="flex",level1.style.display="none",ending.style.display="none",levelNum.textContent=outfitNum,2==outfitNum&&(levelDescription.textContent="Vista Pet\xfania para ir \xe0 feira medieval"),3==outfitNum&&(levelDescription.textContent="Vista Pet\xfania para ir ao show de rock.");break;case 3==page:home.style.display="none",level1Intro.style.display="none",level1.style.display="flex",ending.style.display="none",dollX=0,generateOutfit(),generateLevelArray(),generateObjArray();for(let o=0;o<slots.length;o++)slots[o].src="img/z"+objArray[o][0]+".png",slots[o].style.top=objArray[o][2]+"px";loop=setInterval(gameLoop,60);break;case 4==page:clearInterval(loop),home.style.display="none",level1Intro.style.display="none",level1.style.display="none",ending.style.display="flex",look.src="img/look"+outfitNum+".png",1==outfitNum&&(finalMsg.innerHTML="Da cabe\xe7a at\xe9 as pontas dos p\xe9s, <br/> esse look valeu nota dez!"),2==outfitNum&&(finalMsg.innerHTML="Quem negar cometer\xe1 cal\xfania: <br/> n\xe3o h\xe1 elfa mais estilosa que Pet\xfania!"),3==outfitNum&&(finalMsg.innerHTML="At\xe9 mais que o pr\xf3prio show, <br/>Pet\xfania foi puro rock & roll!",nextButton.style.display="none",bye.style.display="flex",look.style.margin="80px")}}var startButton=document.getElementById("start");startButton.addEventListener("click",function e(){page+=1,refresh()});var goButton=document.getElementById("go");goButton.addEventListener("click",function e(){page+=1,refresh()});var devButton=document.getElementById("dev");devButton.addEventListener("click",function e(){page+=1,refresh(),playButton.style.display="none",pauseButton.style.display="inline-block"});var playButton=document.getElementById("play");playButton.addEventListener("click",function e(){playButton.style.display="none",pauseButton.style.display="inline-block",loop=setInterval(gameLoop,60)});var pauseButton=document.getElementById("pause");pauseButton.addEventListener("click",function e(){pauseButton.style.display="none",playButton.style.display="inline-block",clearInterval(loop)}),nextButton.addEventListener("click",function e(){3!=outfit&&(page=2,outfitNum+=1,refresh())}),document.onkeydown=function(e){"ArrowLeft"==e.code&&(LEFT=!0),"ArrowRight"==e.code&&(RIGHT=!0)},document.onkeyup=function(e){"ArrowLeft"==e.code&&(LEFT=!1),"ArrowRight"==e.code&&(RIGHT=!1)},refresh();